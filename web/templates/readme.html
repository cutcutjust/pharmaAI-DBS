{% extends "base.html" %}

{% block title %}项目文档 - 智药AI{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header bg-light">
        <h2 class="h4 mb-0">
            <i class="fas fa-book me-2"></i>项目文档
        </h2>
    </div>
    <div class="card-body">
        <div class="readme-content">
            {{ content | safe }}
        </div>
    </div>
</div>
{% endblock %}

{% block footer_scripts %}
{{ super() }}
<style>
    /* README 内容样式 */
    .readme-content {
        line-height: 1.8;
        font-size: 16px;
    }
    
    .readme-content h1 {
        color: #333;
        border-bottom: 2px solid #0d6efd;
        padding-bottom: 10px;
        margin-top: 30px;
        margin-bottom: 20px;
    }
    
    .readme-content h2 {
        color: #555;
        border-bottom: 1px solid #ddd;
        padding-bottom: 8px;
        margin-top: 25px;
        margin-bottom: 15px;
    }
    
    .readme-content h3 {
        color: #666;
        margin-top: 20px;
        margin-bottom: 12px;
    }
    
    .readme-content p {
        margin-bottom: 15px;
        text-align: justify;
    }
    
    .readme-content ul, .readme-content ol {
        margin-bottom: 15px;
        padding-left: 30px;
    }
    
    .readme-content li {
        margin-bottom: 8px;
    }
    
    .readme-content code {
        background-color: #f5f5f5;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: 'Courier New', monospace;
        color: #c7254e;
    }
    
    .readme-content pre {
        background-color: #f5f5f5;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 15px;
        overflow-x: auto;
        margin-bottom: 15px;
    }
    
    .readme-content pre code {
        background-color: transparent;
        padding: 0;
        color: #333;
    }
    
    .readme-content table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }
    
    .readme-content table th,
    .readme-content table td {
        border: 1px solid #ddd;
        padding: 10px;
        text-align: left;
    }
    
    .readme-content table th {
        background-color: #f8f9fa;
        font-weight: bold;
    }
    
    .readme-content blockquote {
        border-left: 4px solid #0d6efd;
        padding-left: 15px;
        margin: 15px 0;
        color: #666;
        font-style: italic;
    }
    
    .readme-content a {
        color: #0d6efd;
        text-decoration: none;
    }
    
    .readme-content a:hover {
        text-decoration: underline;
    }
    
    .readme-content img {
        max-width: 100%;
        height: auto;
        margin: 15px 0;
    }
    
    .readme-content hr {
        margin: 25px 0;
        border: 0;
        border-top: 1px solid #ddd;
    }
</style>
<script>
    // 页面加载后修复图片路径
    $(document).ready(function() {
        // 修复所有图片路径
        $('.readme-content img').each(function() {
            var src = $(this).attr('src');
            if (src) {
                // 处理各种路径格式：web/static/, /web/static/, web\static\ 等
                if (src.includes('web/static/') || src.includes('web\\static\\')) {
                    src = src.replace(/\/?web\/static\//g, '/static/');
                    src = src.replace(/\/?web\\static\\/g, '/static/');
                    $(this).attr('src', src);
                }
            }
        });
        
        // 修复所有链接中的图片路径
        $('.readme-content a').each(function() {
            var href = $(this).attr('href');
            if (href && (href.includes('web/static/') || href.includes('web\\static\\'))) {
                href = href.replace(/\/?web\/static\//g, '/static/');
                href = href.replace(/\/?web\\static\\/g, '/static/');
                $(this).attr('href', href);
            }
        });
    });
</script>
{% endblock %}

